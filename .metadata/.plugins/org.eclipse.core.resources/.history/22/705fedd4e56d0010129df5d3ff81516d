package tests;
import org.openqa.selenium.WebDriver;
import org.testng.annotations.*;
import pages.HomePage;
import pages.LoginPage;
import pages.login_page;
import utils.ConfigReader;
import utils.DriverFactory;
import utils.driverOC;

public class PaymentTest {
	    private WebDriver driver;
	    private login_page loginPage;
	    private HomePage homePage;

	    @BeforeClass
	    public void setup() {
	        ConfigReader.loadProperties(); // Load config first
	        driver = driverOC.initDriver();
	        driver.get(ConfigReader.get("baseUrl"));

	        loginPage = new login_page();
	        homePage = new HomePage(driver);
	    }

	    @Test
	    public void loginAndSearchFlow() throws InterruptedException {
	        loginPage.clickLogin();
	        loginPage.enterPhoneNumber(ConfigReader.get("mobileNumber"));
	        loginPage.clickRequestOTP();

	        System.out.println("Please enter OTP manually within 60 seconds...");
	        Thread.sleep(60000); // manual OTP entry

	        homePage.searchProduct(ConfigReader.get("productName"));
	    }

	    @AfterClass
	    public void tearDown() {
	        DriverFactory.quitDriver();
	    }
	}

}
